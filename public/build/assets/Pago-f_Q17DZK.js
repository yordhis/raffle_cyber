import{bO as w,o as i,e as l,a as o,bG as P,r as k,T as C,c as B,w as b,f as M,j as t,t as n,q as h,v as y,g as u,b as v,bu as $,k as O,F as D}from"./app-zsUr2JtW.js";import{_ as E}from"./ClientLayout-rzgruqBB.js";import"./ResponsiveNavLink-8qioENO8.js";import"./_plugin-vue_export-helper-x3n3nnut.js";import"./Banner-Hm4hd9ue.js";const{Axios:V,AxiosError:I,CanceledError:T,isCancel:q,CancelToken:A,VERSION:S,all:j,Cancel:N,isAxiosError:U,spread:F,toFormData:z,AxiosHeaders:R,HttpStatusCode:G,formToJSON:L,getAdapter:H,mergeConfig:Z}=w,J=Object.freeze(Object.defineProperty({__proto__:null,Axios:V,AxiosError:I,AxiosHeaders:R,Cancel:N,CancelToken:A,CanceledError:T,HttpStatusCode:G,VERSION:S,all:j,default:w,formToJSON:L,getAdapter:H,isAxiosError:U,isCancel:q,mergeConfig:Z,spread:F,toFormData:z},Symbol.toStringTag,{value:"Module"}));function K(s,m){return i(),l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[o("path",{"fill-rule":"evenodd",d:"M4 10a.75.75 0 0 1 .75-.75h10.5a.75.75 0 0 1 0 1.5H4.75A.75.75 0 0 1 4 10Z","clip-rule":"evenodd"})])}function Q(s,m){return i(),l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[o("path",{d:"M10.75 4.75a.75.75 0 0 0-1.5 0v4.5h-4.5a.75.75 0 0 0 0 1.5h4.5v4.5a.75.75 0 0 0 1.5 0v-4.5h4.5a.75.75 0 0 0 0-1.5h-4.5v-4.5Z"})])}const W=P(J),{default:X}=W,Y="https://exchange.vcoud.com/";function ee(s,m="-"){const e={á:"a",é:"e",í:"i",ó:"o",ú:"u"};for(const[p,x]of Object.entries(e))s=s.toLowerCase().replace(p,x).replace(" ",m);return s}function te(s){return s.split(" ")[0]==="Dólar"&&s!=="Dólar Today"?s==="Dólar Monitor"?"EnParaleloVzla":s.split(" ")[1]:s}async function oe(s,m,e){let p={};const x=await X.get(Y+"coins/latest");try{if(x.status!==200)throw new Error(`Error de comunicación CriptoDolar. Codigo: ${x.status}`);const f=x.data;for(const c of f)if(c.type.includes("bolivar")||c.type.includes("bancove")){const _={title:te(c.name),price:c.price,price_old:c.priceOld,type:c.type==="bancove"?"bank":"monitor",lastUpdate:c.updatedAt};p[ee(_.title)]=_}if(!(s in p))return p;try{const c=p[s.toLowerCase()];if(m){const _=c[m];if(_===void 0)throw new Error("Consulte la documentación de la biblioteca: https://github.com/fcoagz/consulta-dolar-venezuela");return m==="price"&&e?`Bs. ${_}`:_}else return c}catch(c){console.error(`KeyError: ${c.message}`)}}catch(f){console.error(f)}}var se={getMonitor:oe};const ae=["type"],g={__name:"MovilButton",props:{type:{type:String,default:"button"}},setup(s){return(m,e)=>(i(),l("button",{type:s.type,class:"inline-flex items-center px-4 py-2 bg-verde-700 border border-verde-300 rounded-md font-bold text-white uppercase tracking-widest shadow-sm focus:bg-neutral-900 focus:outline-none focus:ring-2 focus:ring-verde-500 focus:ring-offset-2 disabled:opacity-25 transition ease-in-out duration-150"},[k(m.$slots,"default")],8,ae))}},ne={class:""},de={class:"h-full"},re={class:"flex justify-center flex-wrap"},ie={class:"rounded-2xl p-1 mx-5 my-5"},le=o("h1",{class:"text-4xl text-center text-verde-400"},"Comprar Boleto",-1),ce={class:"p-2 my-2 text-indigo-100 text-center border-dashed border-2 border-verde-400"},me={key:0},ue={class:"inputBox mt-6"},pe=o("span",{class:""},"Nombre completo",-1),_e={key:1,class:"p-0 m-0 text-red-500"},he={class:"inputBox mt-6"},xe=o("span",{class:""},"Rif o número de identificación",-1),ye={key:2,class:"p-0 m-0 text-red-500"},fe={class:"inputBox mt-6"},ve=o("span",{class:""},"N° de teléfono",-1),be={key:3,class:"p-0 m-0 text-red-500"},ge={class:"inputBox mt-6"},we=o("span",null,"Correo eletrónico",-1),Pe={key:4,class:"p-0 m-0 text-red-500"},ke={class:"sm:flex sm:justify-between"},Ce={class:"inputBox mt-6"},Be=o("span",{class:""},"Cantidad de voletos",-1),Me={key:0,class:"p-0 m-0 text-red-500"},$e={class:"flex justify-between sm:invisible mt-2"},Oe={class:"py-2"},De={class:"inputBox mt-2"},Ee=o("span",{class:""},"Total Bs",-1),Ve={key:0,class:"p-0 m-0 text-red-500"},Ie={class:"flex justify-between text-white mt-4"},Te={class:"border border-verde-300 p-2"},qe={class:"border border-verde-300 p-2"},Ae={class:"inputBox mt-6"},Se=o("option",{disabled:"",value:"0"},"SELECCIONE MÉTODO DE PAGO",-1),je=["value"],Ne=o("span",null,"MÉTODO DE PAGO",-1),Ue={key:5,class:"p-0 m-0 text-red-500"},Fe={class:"inputBox mt-5"},ze=o("span",null,"Agregar comprobante",-1),Re={key:7,class:"p-0 m-0 text-red-500"},Ge={class:"inputBox mt-6"},Le=o("span",null,"N° referencia del pago",-1),He={key:8,class:"p-0 m-0 text-red-500"},Ze=["value"],Je=o("button",{class:"mt-4 w-full text-center ease-in duration-300 bg-verde-500 hover:bg-neutral-900 shadow-lg shadow-neutral-500/50 rounded-lg p-2 my-2 text-neutral-900 text-2xl"}," NOTIFICAR PAGO ",-1),Ke={key:0,class:"p-4 m-5 xs:p-0 rounded fixed top-10"},Qe={class:"p-6 max-w-sm mx-auto bg-gray-950 rounded-xl shadow-lg flex items-center space-x-0"},We={class:"p-2"},Xe=o("div",{class:"text-2xl font-medium text-white text-center"},"Datos del método:",-1),Ye={class:"text-slate-950 text-2xl text-center text-white"},et={class:"text-slate-300 text-center"},tt={class:"text-verde-500 text-2xl text-center"},ot={class:"text-slate-300 text-center"},st={class:"text-verde-500 text-2xl text-center"},at={class:"text-slate-300 text-center"},nt={class:"text-verde-500 text-2xl text-center"},dt={class:"text-slate-300 text-center"},rt={class:"text-verde-500 text-2xl text-center"},it={class:"text-slate-300 text-center"},lt={class:"text-verde-500 text-2xl text-center"},ct={class:"text-slate-300 text-center"},mt={class:"text-verde-500 text-2xl text-center"},ut={class:"text-slate-300 text-center"},pt={class:"text-verde-500 text-2xl text-center"},_t={class:"text-center text-white"},bt={__name:"Pago",props:{raffle:{type:Object},methodPayments:{type:Object}},setup(s){const m=s,e=C({name:null,card_id:null,phone:null,email:null,raffle_id:m.raffle.id,amount:2,total:0,tasa:0,payment_method_id:0,file:null,reference_number:null,monitor_tasa:{},sorteo:m.raffle.title,costo:m.raffle.cost,modalInfoMetodoPago:!1,btnDisabled:!1}),p=async r=>{await se.getMonitor("BCV","lastUpdate").then(a=>{r.monitor_tasa=a.bcv,r.tasa=a.bcv.price,localStorage.setItem("tasa",a.bcv.price),r.total=(parseFloat(a.bcv.price)*r.costo*r.amount).toFixed(2)}).catch(a=>{console.log(a),p(r),r.tasa==0?r.tasa=parseFloat(localStorage.getItem("tasa")):r.tasa,r.total=parseFloat(r.tasa)*r.costo*r.amount})};p(e);const x=r=>{if(r.amount<2)return r.amount=2;r.total=(r.tasa*r.costo*r.amount).toFixed(2)},f=()=>e.modalInfoMetodoPago=!1,c=r=>{r?e.modalInfoMetodoPago=!0:e.modalInfoMetodoPago=!1},_=r=>{switch(r){case"+":e.amount++;break;case"-":e.amount--;break;default:e.amount=2;break}x(e)};return(r,a)=>(i(),B(E,{title:"Realizar pago"},{default:b(()=>[o("section",ne,[o("div",de,[o("div",re,[o("div",ie,[o("form",{onSubmit:a[15]||(a[15]=M(d=>t(e).post("/compras"),["prevent"])),novalidate:""},[le,o("p",ce,n(t(e).sorteo),1),h(o("input",{class:"",readonly:"",type:"hidden","onUpdate:modelValue":a[0]||(a[0]=d=>t(e).raffle_id=d)},null,512),[[y,t(e).raffle_id]]),t(e).errors.raffle_id?(i(),l("div",me,n(t(e).errors.raffle_id),1)):u("",!0),o("div",ue,[h(o("input",{class:"",type:"text","onUpdate:modelValue":a[1]||(a[1]=d=>t(e).name=d),required:"required"},null,512),[[y,t(e).name]]),pe]),t(e).errors.name?(i(),l("div",_e,n(t(e).errors.name),1)):u("",!0),o("div",he,[h(o("input",{class:"",type:"text","onUpdate:modelValue":a[2]||(a[2]=d=>t(e).card_id=d),required:"required"},null,512),[[y,t(e).card_id]]),xe]),t(e).errors.card_id?(i(),l("div",ye,n(t(e).errors.card_id),1)):u("",!0),o("div",fe,[h(o("input",{class:"",type:"text","onUpdate:modelValue":a[3]||(a[3]=d=>t(e).phone=d),required:"required"},null,512),[[y,t(e).phone]]),ve]),t(e).errors.phone?(i(),l("div",be,n(t(e).errors.phone),1)):u("",!0),o("div",ge,[h(o("input",{type:"email","onUpdate:modelValue":a[4]||(a[4]=d=>t(e).email=d),required:"required"},null,512),[[y,t(e).email]]),we]),t(e).errors.email?(i(),l("div",Pe,n(t(e).errors.email),1)):u("",!0),o("div",ke,[o("div",Ce,[h(o("input",{class:"",type:"number",onInput:a[5]||(a[5]=d=>x(t(e))),"onUpdate:modelValue":a[6]||(a[6]=d=>t(e).amount=d),required:"required"},null,544),[[y,t(e).amount]]),Be]),t(e).errors.amount?(i(),l("div",Me,n(t(e).errors.amount),1)):u("",!0),o("div",$e,[v(g,{type:"button",class:"sm:h-5",onClick:a[7]||(a[7]=d=>_("-"))},{default:b(()=>[v(t(K),{style:{width:"18px"}})]),_:1}),v(g,{type:"button",class:"sm:h-5",onClick:a[8]||(a[8]=d=>_("+"))},{default:b(()=>[v(t(Q),{style:{width:"18px"}})]),_:1})]),o("div",Oe,[o("div",De,[h(o("input",{class:"",type:"text","onUpdate:modelValue":a[9]||(a[9]=d=>t(e).total=d),readonly:"",required:"true"},null,512),[[y,t(e).total]]),Ee]),t(e).errors.total?(i(),l("div",Ve,n(t(e).errors.total),1)):u("",!0)])]),o("div",Ie,[o("div",Te,"Tasa "+n(t(e).monitor_tasa.title)+": "+n(t(e).monitor_tasa.price)+" Bs",1),o("div",qe,"Costo por voleto: "+n(t(e).costo)+"$",1)]),o("div",Ae,[h(o("select",{class:"rounded-2xl my-2 w-full",id:"select_metodo_pago","onUpdate:modelValue":a[10]||(a[10]=d=>t(e).payment_method_id=d),onChange:a[11]||(a[11]=d=>c(t(e).payment_method_id))},[Se,(i(!0),l(D,null,O(s.methodPayments,d=>(i(),l("option",{key:d.id,value:d.id},n(d.name),9,je))),128))],544),[[$,t(e).payment_method_id]]),Ne]),t(e).errors.payment_method_id?(i(),l("div",Ue,n(t(e).errors.payment_method_id),1)):u("",!0),!t(e).modalInfoMetodoPago&&t(e).payment_method_id!=0?(i(),l("button",{key:6,type:"button",onClick:a[12]||(a[12]=d=>c(t(e).payment_method_id)),class:"w-full ease-in duration-300 bg-gray-950 hover:bg-verde-700 shadow-lg shadow-verde-500/50 rounded-lg p-2 my-2 text-white text-sm text-center"}," Ver datos de pago ")):u("",!0),o("div",Fe,[o("input",{class:"",accept:"image/*",type:"file",onInput:a[13]||(a[13]=d=>t(e).file=d.target.files[0])},null,32),ze]),t(e).errors.file?(i(),l("div",Re,n(t(e).errors.file),1)):u("",!0),o("div",Ge,[h(o("input",{type:"number","onUpdate:modelValue":a[14]||(a[14]=d=>t(e).reference_number=d),required:""},null,512),[[y,t(e).reference_number]]),Le]),t(e).errors.reference_number?(i(),l("div",He,n(t(e).errors.reference_number),1)):u("",!0),t(e).progress?(i(),l("progress",{key:9,value:t(e).progress.percentage,class:"w-full",max:"100"},n(t(e).progress.percentage)+"% ",9,Ze)):u("",!0),Je],32)]),t(e).modalInfoMetodoPago?(i(),l("div",Ke,[o("div",Qe,[o("div",We,[Xe,o("p",Ye,n(s.methodPayments[t(e).payment_method_id-1].name),1),o("p",et,n(s.methodPayments[t(e).payment_method_id-1].phone?"Teléfono":""),1),o("p",tt,n(s.methodPayments[t(e).payment_method_id-1].phone?s.methodPayments[t(e).payment_method_id-1].phone:""),1),o("p",ot,n(s.methodPayments[t(e).payment_method_id-1].account?"Cuenta Bancaria":""),1),o("p",st,n(s.methodPayments[t(e).payment_method_id-1].account?s.methodPayments[t(e).payment_method_id-1].account:""),1),o("p",at,n(s.methodPayments[t(e).payment_method_id-1].account_type?"Tipo de cuenta":""),1),o("p",nt,n(s.methodPayments[t(e).payment_method_id-1].account_type?s.methodPayments[t(e).payment_method_id-1].account_type:""),1),o("p",dt,n(s.methodPayments[t(e).payment_method_id-1].bank?"Banco":""),1),o("p",rt,n(s.methodPayments[t(e).payment_method_id-1].bank?s.methodPayments[t(e).payment_method_id-1].bank:""),1),o("p",it,n(s.methodPayments[t(e).payment_method_id-1].bank_code?"Código":""),1),o("p",lt,n(s.methodPayments[t(e).payment_method_id-1].bank_code?s.methodPayments[t(e).payment_method_id-1].bank_code:""),1),o("p",ct,n(s.methodPayments[t(e).payment_method_id-1].card_id?"Documento de identidad":""),1),o("p",mt,n(s.methodPayments[t(e).payment_method_id-1].card_id?s.methodPayments[t(e).payment_method_id-1].card_id:""),1),o("p",ut,n(s.methodPayments[t(e).payment_method_id-1].titular?"Titular":""),1),o("p",pt,n(s.methodPayments[t(e).payment_method_id-1].titular?s.methodPayments[t(e).payment_method_id-1].titular:""),1),o("p",_t,[o("button",{class:"bg-red-600 p-2 m-2 rounded-xl",onClick:a[16]||(a[16]=d=>f())},"Cerrar")])])])])):u("",!0)])])])]),_:1}))}};export{bt as default};
