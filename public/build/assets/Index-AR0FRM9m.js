import{_ as F}from"./AuthenticatedLayout-yXKWLHmV.js";import{o as n,e as f,a as t,h,c as m,w as l,b as i,i as c,k as T,t as r,g as _,j as o,F as V}from"./app-IhCnJsfv.js";import{S as Z}from"./SectionTitle-cK6pZHi_.js";import{u as w,S as C}from"./sweetalert2.all-6QxQDLql.js";import{D as N}from"./DangerButton-mpp2tcPl.js";import{P as u}from"./PrimaryButton-gl4TObUX.js";import{_ as z}from"./InputLabel-ZuVY-nbN.js";import{_ as D}from"./TextInput-3_upzN8a.js";import{_ as R}from"./Modal-9gpVcD5p.js";import{h as q}from"./vue-tailwind-pagination.es--VdnN7A8.js";import{r as U}from"./TrashIcon-lsg_jt98.js";import"./ResponsiveNavLink-xW8RBI19.js";import"./NavLink-Nvm8Ja9a.js";import"./_plugin-vue_export-helper-x3n3nnut.js";function O(p,g){return n(),f("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"fill-rule":"evenodd",d:"M16.704 4.153a.75.75 0 0 1 .143 1.052l-8 10.5a.75.75 0 0 1-1.127.075l-4.5-4.5a.75.75 0 0 1 1.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 0 1 1.05-.143Z","clip-rule":"evenodd"})])}function H(p,g){return n(),f("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{d:"M10 12.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5Z"}),t("path",{"fill-rule":"evenodd",d:"M.664 10.59a1.651 1.651 0 0 1 0-1.186A10.004 10.004 0 0 1 10 3c4.257 0 7.893 2.66 9.336 6.41.147.381.146.804 0 1.186A10.004 10.004 0 0 1 10 17c-4.257 0-7.893-2.66-9.336-6.41ZM14 10a4 4 0 1 1-8 0 4 4 0 0 1 8 0Z","clip-rule":"evenodd"})])}function G(p,g){return n(),f("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{d:"M6.28 5.22a.75.75 0 0 0-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 1 0 1.06 1.06L10 11.06l3.72 3.72a.75.75 0 1 0 1.06-1.06L11.06 10l3.72-3.72a.75.75 0 0 0-1.06-1.06L10 8.94 6.28 5.22Z"})])}const J={class:"flex flex-wrap justify-between"},K=t("div",{class:"text-4xl"}," Listas de pagos ",-1),Q=t("div",null,null,-1),W={class:"mx-5 mt-5 flex flex-wrap"},X={class:"overflow-x-auto p-5"},Y={class:"min-w-full shadow-sm border-gray-200"},ee=t("thead",{class:"px-3 py-2 font-semibold text-left bg-orange-500 border-b"},[t("tr",null,[t("th",{class:"border border-gray-400 px-2 py-2"},"N° orden"),t("th",{class:"border border-gray-400 px-2 py-2"},"Participantes"),t("th",{class:"border border-gray-400 px-2 py-2"},"Fecha de pago"),t("th",{class:"border border-gray-400 px-2 py-2"},"Total pagado"),t("th",{class:"border border-gray-400 px-2 py-2"},"Estado del pago"),t("th",{class:"border border-gray-400 px-2 py-2"},"Acciones")])],-1),te={class:"bg-white"},se={class:"border border-gray-400 px-2 py-2"},oe={class:"border border-gray-400 px-2 py-2"},ae=t("br",null,null,-1),re={class:"border border-gray-400 px-2 py-2"},le={class:"border border-gray-400 px-2 py-2"},ne={class:"border border-gray-400 px-2 py-2"},de={class:"border border-gray-400 px-2 py-2"},ie={colspan:"6"},ce={class:"flex flex-wrap justify-center"},_e={class:"w-full bg-orange-500 text-3xl font.medium text-white p-2"},me=t("p",{class:"p-4 bg-gray-200"},"Al confirmar o rechazar el pago se enviará un correo al cliente de su estatus de pago y si el pago es confirmao le llegará los números de boletos.",-1),ue={class:"w-70 border-4 border-bottom text-center"},pe=["src"],fe={class:"w-full"},ge={class:"divide-y divide-blue-200"},he={key:0,class:"p-2 mx-4 bg-orange-500"},be={class:"p-2 mx-4"},xe={class:"p-2 mx-4"},ve={class:"p-2 mx-4"},ye={class:"p-2 mx-4"},we={class:"p-2 mx-4"},Ce={class:"p-2 mx-4"},ke={class:"p-2 mx-4"},Pe={class:"p-2 mx-4"},Be={class:"p-2 mx-4"},Se=["value"],$e={class:"p-2 mx-4"},Ne={class:"flex justify-between"},Ue={__name:"Index",props:{message:{type:String,default:""},status:{type:Number,default:""},payments:{type:Object},methods:{type:Object}},setup(p){h(null);const g=h(!1),k=h(""),M=h(1),P=h(""),E=window.location.search,v=new URLSearchParams(E),b=w({message:"",status:""}),e=w({order_code:"",client_id:"",raffle_id:"",tasa:"",total:"",amount:"",payment_date:"",payment_method_id:"",reference_number:"",file:"",payment_status:"",name:"",card_id:"",email:"",phone:"",title:"",description:"",cost:"",limit_number:"",end_date:"",boletos:""}),I=w({}),L=d=>{I.get(route("clientes.index",{page:d}))},B=(d,s)=>{g.value=!0,M.value=d,P.value=s.pay_id,d==1&&(k.value="Verificar pago",e.pay_id=s.pay_id,e.order_code=s.order_code,e.client_id=s.client_id,e.raffle_id=s.raffle_id,e.tasa=s.tasa,e.total=s.total,e.amount=s.amount,e.payment_date=s.payment_date,e.payment_method_id=s.payment_method_id,e.reference_number=s.reference_number,e.file=s.vauche,e.payment_status=s.payment_status,e.name=s.name,e.card_id=s.card_id,e.email=s.email,e.phone=s.phone,e.title=s.title,e.description=s.description,e.cost=s.cost,e.limit_number=s.limit_number,e.end_date=s.end_date,e.boletos=s.boletos)},S=()=>{g.value=!1,e.reset()},$=d=>{console.log(e.payment_status),e.payment_status=d,console.log(e.payment_status),d==1?e.put(route("pagos.confirmed"),{onSuccess:()=>{y("Pago confirmado")}}):e.put(route("pagos.decline",P.value),{onSuccess:()=>{y("Pago rechazado")}})},y=d=>{e.reset(),S(),C.fire({title:d,icon:"success"})},j=(d,s)=>{let a="";s==200&&(a="success"),s==404&&(a="error"),C.fire({title:d,icon:a})},A=(d,s)=>{const a=C.mixin({buttonsStyling:!0});e.pay_id=s.pay_id,e.order_code=s.order_code,e.client_id=s.client_id,e.raffle_id=s.raffle_id,e.boletos=s.boletos,a.fire({title:"¿Seguro que desea eliminar a el pago del cliente "+s.name+" ?",icon:"question",showCancelButton:!0,confirmButtonText:"si, Eliminar",cancelButtonText:"Cancelar"}).then(x=>{x.isConfirmed&&(console.log(s.pay_id),console.log(s.order_code),e.delete(route("pagos.destroy",s.pay_id),{onSuccess:()=>{y("Pago eliminado y rechazado.")}}))})};return v.has("message")&&(b.message=v.get("message"),b.status=v.get("status"),j(b.message,b.status)),(d,s)=>(n(),m(F,{title:"Pagos"},{header:l(()=>[t("div",J,[t("div",null,[i(Z,null,{title:l(()=>[K]),description:l(()=>[c(" En la siguiente lista puede visualizar, editar y eliminar los pagos de los boletos. ")]),_:1})]),Q])]),default:l(()=>[t("div",W,[t("div",null,[i(z,{value:"Filtre por cédula o nombre"}),i(D,{placeholder:"Ingrese busqueda"})])]),t("div",X,[t("table",Y,[ee,t("tbody",te,[(n(!0),f(V,null,T(p.payments.data,a=>(n(),f("tr",{key:a.pay_id},[t("td",se,r(a.order_code),1),t("td",oe,[c(r(a.name),1),ae,c("C.I.:"+r(a.card_id),1)]),t("td",re,r(a.payment_date),1),t("td",le,r(a.total),1),t("td",ne,[a.payment_status==1?(n(),m(u,{key:0},{default:l(()=>[c("Confirmado")]),_:1})):_("",!0),a.payment_status==2?(n(),m(u,{key:1,class:"bg-red-500"},{default:l(()=>[c("Rechazado")]),_:1})):_("",!0),a.payment_status==0?(n(),m(u,{key:2,class:"bg-red-500",onClick:x=>B(1,a)},{default:l(()=>[c(" Por confirmar")]),_:2},1032,["onClick"])):_("",!0)]),t("td",de,[i(u,{onClick:x=>B(1,a)},{default:l(()=>[i(o(H),{style:{width:"15px"}})]),_:2},1032,["onClick"]),i(N,{class:"mx-1",onClick:x=>A(a.id,a)},{default:l(()=>[i(o(U),{style:{width:"15px"}})]),_:2},1032,["onClick"])])]))),128))]),t("tfoot",null,[t("tr",null,[t("td",ie,[i(o(q),{current:p.payments.current_page,total:p.payments.total,"text-before-input":"Ir a la pagina","text-after-input":"Ir","per-page":p.payments.per_page,onPageChanged:s[0]||(s[0]=a=>L(a))},null,8,["current","total","per-page"])])])])])]),i(R,{show:g.value,onClose:S,class:""},{default:l(()=>[t("div",ce,[t("h2",_e,r(k.value),1),me,t("div",ue,[i(z,{class:"my-2"},{default:l(()=>[c("VAUCHE")]),_:1}),t("img",{src:o(e).file?o(e).file:"assets/images/no-image.png",alt:"Premios",class:"",loading:"lazy"},null,8,pe)]),t("div",fe,[t("div",ge,[parseInt(o(e).payment_status)==1?(n(),f("div",he,"Boletos asignados: "+r(o(e).boletos),1)):_("",!0),t("div",be,"N° de orden: "+r(o(e).order_code),1),t("div",xe,"Sorteo: "+r(o(e).title),1),t("div",ve,"Cliente: "+r(o(e).name)+" - C.I.: "+r(o(e).card_id),1),t("div",ye,"N° teléfono: "+r(o(e).phone)+" - E-mail: "+r(o(e).email),1),t("div",we,"Tasa: "+r(o(e).tasa)+" - Monto cancelado: "+r(o(e).total),1),t("div",Ce,"Cantidad de boletos comprados: "+r(o(e).amount),1),t("div",ke,"Fecha de pago: "+r(o(e).payment_date),1),t("div",Pe,"N° de referencia del pago: "+r(o(e).reference_number),1),t("div",Be,[o(e).progress?(n(),f("progress",{key:0,value:o(e).progress.percentage,class:"w-full",max:"100"},r(o(e).progress.percentage)+"% ",9,Se)):_("",!0)]),t("div",$e,[c("Estatus del pago: "),o(e).payment_status==1?(n(),m(u,{key:0},{default:l(()=>[c("Confirmado")]),_:1})):_("",!0),o(e).payment_status==2?(n(),m(u,{key:1,class:"bg-red-500"},{default:l(()=>[c("Rechazado")]),_:1})):_("",!0),o(e).payment_status==0?(n(),m(u,{key:2,class:"bg-red-500"},{default:l(()=>[c(" Por confirmar")]),_:1})):_("",!0)])])])]),t("div",Ne,[o(e).payment_status==0||o(e).payment_status==2?(n(),m(u,{key:0,disabled:o(e).processing,onClick:s[1]||(s[1]=a=>$(1)),class:"flex mx-4"},{default:l(()=>[i(o(O),{style:{width:"25px"},class:"mx-2"}),c("Confirmar pago ")]),_:1},8,["disabled"])):_("",!0),i(N,{disabled:o(e).processing,onClick:s[2]||(s[2]=a=>$(2)),class:"flex mx-4"},{default:l(()=>[i(o(G),{style:{width:"25px"},class:"mx-2"}),c(" Rechazar pago ")]),_:1},8,["disabled"])])]),_:1},8,["show"])]),_:1}))}};export{Ue as default};
