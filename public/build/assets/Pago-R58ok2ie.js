import{bO as w,o as i,e as l,a as o,bG as P,r as k,T as C,c as B,w as v,f as M,j as e,t as r,q as h,v as y,g as m,b as g,bu as $,k as O,F as D}from"./app-moUegy4D.js";import{_ as E}from"./ClientLayout-oGpcWgbX.js";import"./NavLink-9xNka0Wd.js";import"./_plugin-vue_export-helper-x3n3nnut.js";import"./Banner-2MqhxwwD.js";const{Axios:V,AxiosError:I,CanceledError:T,isCancel:q,CancelToken:A,VERSION:S,all:j,Cancel:N,isAxiosError:U,spread:F,toFormData:z,AxiosHeaders:R,HttpStatusCode:G,formToJSON:L,getAdapter:H,mergeConfig:Z}=w,J=Object.freeze(Object.defineProperty({__proto__:null,Axios:V,AxiosError:I,AxiosHeaders:R,Cancel:N,CancelToken:A,CanceledError:T,HttpStatusCode:G,VERSION:S,all:j,default:w,formToJSON:L,getAdapter:H,isAxiosError:U,isCancel:q,mergeConfig:Z,spread:F,toFormData:z},Symbol.toStringTag,{value:"Module"}));function K(s,u){return i(),l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[o("path",{"fill-rule":"evenodd",d:"M4 10a.75.75 0 0 1 .75-.75h10.5a.75.75 0 0 1 0 1.5H4.75A.75.75 0 0 1 4 10Z","clip-rule":"evenodd"})])}function Q(s,u){return i(),l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[o("path",{d:"M10.75 4.75a.75.75 0 0 0-1.5 0v4.5h-4.5a.75.75 0 0 0 0 1.5h4.5v4.5a.75.75 0 0 0 1.5 0v-4.5h4.5a.75.75 0 0 0 0-1.5h-4.5v-4.5Z"})])}const W=P(J),{default:X}=W,Y="https://exchange.vcoud.com/";function tt(s,u="-"){const t={á:"a",é:"e",í:"i",ó:"o",ú:"u"};for(const[p,x]of Object.entries(t))s=s.toLowerCase().replace(p,x).replace(" ",u);return s}function et(s){return s.split(" ")[0]==="Dólar"&&s!=="Dólar Today"?s==="Dólar Monitor"?"EnParaleloVzla":s.split(" ")[1]:s}async function ot(s,u,t){let p={};const x=await X.get(Y+"coins/latest");try{if(x.status!==200)throw new Error(`Error de comunicación CriptoDolar. Codigo: ${x.status}`);const f=x.data;for(const c of f)if(c.type.includes("bolivar")||c.type.includes("bancove")){const _={title:et(c.name),price:c.price,price_old:c.priceOld,type:c.type==="bancove"?"bank":"monitor",lastUpdate:c.updatedAt};p[tt(_.title)]=_}if(!(s in p))return p;try{const c=p[s.toLowerCase()];if(u){const _=c[u];if(_===void 0)throw new Error("Consulte la documentación de la biblioteca: https://github.com/fcoagz/consulta-dolar-venezuela");return u==="price"&&t?`Bs. ${_}`:_}else return c}catch(c){console.error(`KeyError: ${c.message}`)}}catch(f){console.error(f)}}var st={getMonitor:ot};const at=["type"],b={__name:"MovilButton",props:{type:{type:String,default:"button"}},setup(s){return(u,t)=>(i(),l("button",{type:s.type,class:"inline-flex items-center px-4 py-2 bg-orange-700 border border-orange-300 rounded-md font-bold text-white uppercase tracking-widest shadow-sm focus:bg-neutral-900 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:ring-offset-2 disabled:opacity-25 transition ease-in-out duration-150"},[k(u.$slots,"default")],8,at))}},nt={class:""},rt={class:"h-full"},dt={class:"flex justify-center flex-wrap"},it={class:"rounded-2xl p-1 mx-5 my-5"},lt=o("h1",{class:"text-4xl text-center text-orange-400"},"Comprar Boleto",-1),ct={class:"p-2 my-2 text-indigo-100 text-center border-dashed border-2 border-orange-400"},mt={key:0},ut={class:"inputBox mt-6"},pt=o("span",{class:""},"Nombre completo",-1),_t={key:1,class:"p-0 m-0 text-red-500"},ht={class:"inputBox mt-6"},xt=o("span",{class:""},"Rif o número de identificación",-1),yt={key:2,class:"p-0 m-0 text-red-500"},ft={class:"inputBox mt-6"},gt=o("span",{class:""},"N° de teléfono",-1),vt={key:3,class:"p-0 m-0 text-red-500"},bt={class:"inputBox mt-6"},wt=o("span",null,"Correo eletrónico",-1),Pt={key:4,class:"p-0 m-0 text-red-500"},kt={class:"sm:flex sm:justify-between"},Ct={class:"inputBox mt-6"},Bt=o("span",{class:""},"Cantidad de voletos",-1),Mt={key:0,class:"p-0 m-0 text-red-500"},$t={class:"flex justify-between sm:invisible mt-2"},Ot={class:"py-2"},Dt={class:"inputBox mt-2"},Et=o("span",{class:""},"Total Bs",-1),Vt={key:0,class:"p-0 m-0 text-red-500"},It={class:"flex justify-between text-white mt-4"},Tt={class:"border border-orange-300 p-2"},qt=o("div",{class:"border border-orange-300 p-2"},"Costo por voleto: 2$",-1),At={class:"inputBox mt-6"},St=o("option",{disabled:"",value:"0"},"SELECCIONE MÉTODO DE PAGO",-1),jt=["value"],Nt=o("span",null,"MÉTODO DE PAGO",-1),Ut={key:5,class:"p-0 m-0 text-red-500"},Ft={class:"inputBox mt-5"},zt=o("span",null,"Agregar comprobante",-1),Rt={key:7,class:"p-0 m-0 text-red-500"},Gt={class:"inputBox mt-6"},Lt=o("span",null,"N° referencia del pago",-1),Ht={key:8,class:"p-0 m-0 text-red-500"},Zt=["value"],Jt=o("button",{class:"mt-4 w-full text-center ease-in duration-300 bg-orange-500 hover:bg-neutral-900 shadow-lg shadow-neutral-500/50 rounded-lg p-2 my-2 text-neutral-900 text-2xl"}," NOTIFICAR PAGO ",-1),Kt={key:0,class:"p-4 m-5 xs:p-0 rounded fixed top-10"},Qt={class:"p-6 max-w-sm mx-auto bg-gray-950 rounded-xl shadow-lg flex items-center space-x-0"},Wt={class:"p-2"},Xt=o("div",{class:"text-2xl font-medium text-white text-center"},"Datos del método:",-1),Yt={class:"text-slate-950 text-2xl text-center text-white"},te={class:"text-slate-300 text-center"},ee={class:"text-orange-500 text-2xl text-center"},oe={class:"text-slate-300 text-center"},se={class:"text-orange-500 text-2xl text-center"},ae={class:"text-slate-300 text-center"},ne={class:"text-orange-500 text-2xl text-center"},re={class:"text-slate-300 text-center"},de={class:"text-orange-500 text-2xl text-center"},ie={class:"text-slate-300 text-center"},le={class:"text-orange-500 text-2xl text-center"},ce={class:"text-slate-300 text-center"},me={class:"text-orange-500 text-2xl text-center"},ue={class:"text-slate-300 text-center"},pe={class:"text-orange-500 text-2xl text-center"},_e={class:"text-center text-white"},ve={__name:"Pago",props:{raffle:{type:Object},methodPayments:{type:Object}},setup(s){const u=s,t=C({name:null,card_id:null,phone:null,email:null,raffle_id:u.raffle.id,amount:2,total:0,tasa:0,payment_method_id:0,file:null,reference_number:null,monitor_tasa:{},sorteo:u.raffle.title,modalInfoMetodoPago:!1,btnDisabled:!1}),p=async d=>{await st.getMonitor("BCV","lastUpdate").then(a=>{d.monitor_tasa=a.bcv,localStorage.setItem("tasa",a.bcv.price)}).catch(a=>{console.log(a),p(d)}),d.tasa==0?d.tasa=parseFloat(localStorage.getItem("tasa")):d.tasa,d.total=parseFloat(d.tasa)*d.amount};p(t);const x=d=>{if(d.amount<2)return d.amount=2;d.total=(parseFloat(d.tasa)*d.amount).toFixed(2)},f=()=>t.modalInfoMetodoPago=!1,c=d=>{d?t.modalInfoMetodoPago=!0:t.modalInfoMetodoPago=!1},_=d=>{switch(d){case"+":t.amount++;break;case"-":t.amount--;break;default:t.amount=2;break}x(t)};return(d,a)=>(i(),B(E,{title:"Realizar pago"},{default:v(()=>[o("section",nt,[o("div",rt,[o("div",dt,[o("div",it,[o("form",{onSubmit:a[15]||(a[15]=M(n=>e(t).post("/compras"),["prevent"])),novalidate:""},[lt,o("p",ct,r(e(t).sorteo),1),h(o("input",{class:"",readonly:"",type:"hidden","onUpdate:modelValue":a[0]||(a[0]=n=>e(t).raffle_id=n)},null,512),[[y,e(t).raffle_id]]),e(t).errors.raffle_id?(i(),l("div",mt,r(e(t).errors.raffle_id),1)):m("",!0),o("div",ut,[h(o("input",{class:"",type:"text","onUpdate:modelValue":a[1]||(a[1]=n=>e(t).name=n),required:"required"},null,512),[[y,e(t).name]]),pt]),e(t).errors.name?(i(),l("div",_t,r(e(t).errors.name),1)):m("",!0),o("div",ht,[h(o("input",{class:"",type:"text","onUpdate:modelValue":a[2]||(a[2]=n=>e(t).card_id=n),required:"required"},null,512),[[y,e(t).card_id]]),xt]),e(t).errors.card_id?(i(),l("div",yt,r(e(t).errors.card_id),1)):m("",!0),o("div",ft,[h(o("input",{class:"",type:"text","onUpdate:modelValue":a[3]||(a[3]=n=>e(t).phone=n),required:"required"},null,512),[[y,e(t).phone]]),gt]),e(t).errors.phone?(i(),l("div",vt,r(e(t).errors.phone),1)):m("",!0),o("div",bt,[h(o("input",{type:"email","onUpdate:modelValue":a[4]||(a[4]=n=>e(t).email=n),required:"required"},null,512),[[y,e(t).email]]),wt]),e(t).errors.email?(i(),l("div",Pt,r(e(t).errors.email),1)):m("",!0),o("div",kt,[o("div",Ct,[h(o("input",{class:"",type:"number",onInput:a[5]||(a[5]=n=>x(e(t))),"onUpdate:modelValue":a[6]||(a[6]=n=>e(t).amount=n),required:"required"},null,544),[[y,e(t).amount]]),Bt]),e(t).errors.amount?(i(),l("div",Mt,r(e(t).errors.amount),1)):m("",!0),o("div",$t,[g(b,{type:"button",class:"sm:h-5",onClick:a[7]||(a[7]=n=>_("-"))},{default:v(()=>[g(e(K),{style:{width:"18px"}})]),_:1}),g(b,{type:"button",class:"sm:h-5",onClick:a[8]||(a[8]=n=>_("+"))},{default:v(()=>[g(e(Q),{style:{width:"18px"}})]),_:1})]),o("div",Ot,[o("div",Dt,[h(o("input",{class:"",type:"text","onUpdate:modelValue":a[9]||(a[9]=n=>e(t).total=n),readonly:"",required:"true"},null,512),[[y,e(t).total]]),Et]),e(t).errors.total?(i(),l("div",Vt,r(e(t).errors.total),1)):m("",!0)])]),o("div",It,[o("div",Tt,"Tasa "+r(e(t).monitor_tasa.title)+": "+r(e(t).tasa)+" Bs",1),qt]),o("div",At,[h(o("select",{class:"rounded-2xl my-2 w-full",id:"select_metodo_pago","onUpdate:modelValue":a[10]||(a[10]=n=>e(t).payment_method_id=n),onChange:a[11]||(a[11]=n=>c(e(t).payment_method_id))},[St,(i(!0),l(D,null,O(s.methodPayments,n=>(i(),l("option",{key:n.id,value:n.id},r(n.name),9,jt))),128))],544),[[$,e(t).payment_method_id]]),Nt]),e(t).errors.payment_method_id?(i(),l("div",Ut,r(e(t).errors.payment_method_id),1)):m("",!0),!e(t).modalInfoMetodoPago&&e(t).payment_method_id!=0?(i(),l("button",{key:6,type:"button",onClick:a[12]||(a[12]=n=>c(e(t).payment_method_id)),class:"w-full text-center ease-in duration-300 bg-gray-950 hover:bg-orange-700 shadow-lg shadow-orange-500/50 rounded-lg p-2 my-2 text-white text-sm text-center"}," Ver datos de pago ")):m("",!0),o("div",Ft,[o("input",{class:"",accept:"image/*",type:"file",onInput:a[13]||(a[13]=n=>e(t).file=n.target.files[0])},null,32),zt]),e(t).errors.file?(i(),l("div",Rt,r(e(t).errors.file),1)):m("",!0),o("div",Gt,[h(o("input",{type:"number","onUpdate:modelValue":a[14]||(a[14]=n=>e(t).reference_number=n),required:""},null,512),[[y,e(t).reference_number]]),Lt]),e(t).errors.reference_number?(i(),l("div",Ht,r(e(t).errors.reference_number),1)):m("",!0),e(t).progress?(i(),l("progress",{key:9,value:e(t).progress.percentage,class:"w-full",max:"100"},r(e(t).progress.percentage)+"% ",9,Zt)):m("",!0),Jt],32)]),e(t).modalInfoMetodoPago?(i(),l("div",Kt,[o("div",Qt,[o("div",Wt,[Xt,o("p",Yt,r(s.methodPayments[e(t).payment_method_id-1].name),1),o("p",te,r(s.methodPayments[e(t).payment_method_id-1].phone?"Teléfono":""),1),o("p",ee,r(s.methodPayments[e(t).payment_method_id-1].phone?s.methodPayments[e(t).payment_method_id-1].phone:""),1),o("p",oe,r(s.methodPayments[e(t).payment_method_id-1].account?"Cuenta Bancaria":""),1),o("p",se,r(s.methodPayments[e(t).payment_method_id-1].account?s.methodPayments[e(t).payment_method_id-1].account:""),1),o("p",ae,r(s.methodPayments[e(t).payment_method_id-1].account_type?"Tipo de cuenta":""),1),o("p",ne,r(s.methodPayments[e(t).payment_method_id-1].account_type?s.methodPayments[e(t).payment_method_id-1].account_type:""),1),o("p",re,r(s.methodPayments[e(t).payment_method_id-1].bank?"Banco":""),1),o("p",de,r(s.methodPayments[e(t).payment_method_id-1].bank?s.methodPayments[e(t).payment_method_id-1].bank:""),1),o("p",ie,r(s.methodPayments[e(t).payment_method_id-1].bank_code?"Código":""),1),o("p",le,r(s.methodPayments[e(t).payment_method_id-1].bank_code?s.methodPayments[e(t).payment_method_id-1].bank_code:""),1),o("p",ce,r(s.methodPayments[e(t).payment_method_id-1].card_id?"Documento de identidad":""),1),o("p",me,r(s.methodPayments[e(t).payment_method_id-1].card_id?s.methodPayments[e(t).payment_method_id-1].card_id:""),1),o("p",ue,r(s.methodPayments[e(t).payment_method_id-1].titular?"Titular":""),1),o("p",pe,r(s.methodPayments[e(t).payment_method_id-1].titular?s.methodPayments[e(t).payment_method_id-1].titular:""),1),o("p",_e,[o("button",{class:"bg-red-600 p-2 m-2 rounded-xl",onClick:a[16]||(a[16]=n=>f())},"Cerrar")])])])])):m("",!0)])])])]),_:1}))}};export{ve as default};
