import{bN as C,o as d,e as i,a as o,bF as M,T as V,c as I,w as p,f as B,j as t,b as m,i as x,m as f,v as h,t as r,g as _,bs as E,k as $,F as D}from"./app-Q_W_1sbo.js";import{_ as P}from"./ClientLayout-xChsKSgc.js";import{_ as y}from"./InputLabel-7y7ZFVT4.js";import{P as k}from"./PrimaryButton-5eAoiLdd.js";import"./NavLink-Ip9TeEBr.js";import"./_plugin-vue_export-helper-x3n3nnut.js";import"./Banner-xFdQxwwh.js";const{Axios:T,AxiosError:U,CanceledError:S,isCancel:A,CancelToken:N,VERSION:j,all:O,Cancel:F,isAxiosError:R,spread:z,toFormData:L,AxiosHeaders:H,HttpStatusCode:Z,formToJSON:q,getAdapter:G,mergeConfig:J}=C,K=Object.freeze(Object.defineProperty({__proto__:null,Axios:T,AxiosError:U,AxiosHeaders:H,Cancel:F,CancelToken:N,CanceledError:S,HttpStatusCode:Z,VERSION:j,all:O,default:C,formToJSON:q,getAdapter:G,isAxiosError:R,isCancel:A,mergeConfig:J,spread:z,toFormData:L},Symbol.toStringTag,{value:"Module"}));function Q(c,n){return d(),i("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[o("path",{"fill-rule":"evenodd",d:"M4 10a.75.75 0 0 1 .75-.75h10.5a.75.75 0 0 1 0 1.5H4.75A.75.75 0 0 1 4 10Z","clip-rule":"evenodd"})])}function W(c,n){return d(),i("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[o("path",{d:"M10.75 4.75a.75.75 0 0 0-1.5 0v4.5h-4.5a.75.75 0 0 0 0 1.5h4.5v4.5a.75.75 0 0 0 1.5 0v-4.5h4.5a.75.75 0 0 0 0-1.5h-4.5v-4.5Z"})])}const X=M(K),{default:Y}=X,ee="https://exchange.vcoud.com/";function te(c,n="-"){const e={á:"a",é:"e",í:"i",ó:"o",ú:"u"};for(const[g,b]of Object.entries(e))c=c.toLowerCase().replace(g,b).replace(" ",n);return c}function oe(c){return c.split(" ")[0]==="Dólar"&&c!=="Dólar Today"?c==="Dólar Monitor"?"EnParaleloVzla":c.split(" ")[1]:c}async function ae(c,n,e){let g={};const b=await Y.get(ee+"coins/latest");try{if(b.status!==200)throw new Error(`Error de comunicación CriptoDolar. Codigo: ${b.status}`);const w=b.data;for(const u of w)if(u.type.includes("bolivar")||u.type.includes("bancove")){const v={title:oe(u.name),price:u.price,price_old:u.priceOld,type:u.type==="bancove"?"bank":"monitor",lastUpdate:u.updatedAt};g[te(v.title)]=v}if(!(c in g))return g;try{const u=g[c.toLowerCase()];if(n){const v=u[n];if(v===void 0)throw new Error("Consulte la documentación de la biblioteca: https://github.com/fcoagz/consulta-dolar-venezuela");return n==="price"&&e?`Bs. ${v}`:v}else return u}catch(u){console.error(`KeyError: ${u.message}`)}}catch(w){console.error(w)}}var se={getMonitor:ae};const ne={class:""},re={class:"h-full"},le=o("div",{class:"flex justify-center my-2"},[o("span",{class:"p-2 box-decoration-slice bg-gradient-to-r from-orange-600 to-pink-500 text-white px-2 text-6xl"}," Realizar pago ")],-1),de={class:"flex justify-center flex-wrap"},ie={class:"bg-white rounded-2xl p-4 mx-10 my-5"},ce={key:0},ue={key:1,class:"p-0 m-0 text-red-500"},pe={key:2,class:"p-0 m-0 text-red-500"},me={key:3,class:"p-0 m-0 text-red-500"},_e={key:4,class:"p-0 m-0 text-red-500"},xe={class:"sm:flex sm:justify-between"},fe={class:"py-2 pr-2"},ye={key:0,class:"p-0 m-0 text-red-500"},he={class:"xs:flex xs:justify-between sm:invisible"},ge={class:"py-2"},ve={key:0,class:"p-0 m-0 text-red-500"},be={class:"flex justify-between"},we={class:"border p-2 mx-2"},ke=o("div",{class:"border p-2 mx-2"},"Costo por voleto: 2$",-1),Ce={key:5,class:"p-0 m-0 text-red-500"},Me=o("option",{disabled:"",value:"0"},"SELECCIONE MÉTODO DE PAGO",-1),Ve=["value"],Ie={key:6,class:"p-0 m-0 text-red-500"},Be={key:8,class:"p-0 m-0 text-red-500"},Ee={key:9,class:"p-0 m-0 text-red-500"},$e=["value"],De=o("button",{class:"w-full text-center ease-in duration-300 bg-green-500 hover:bg-orange-700 shadow-lg shadow-green-500/50 rounded-lg p-2 my-2 text-white text-2xl text-center"}," Registrar pago ",-1),Pe={key:0,class:"p-4 m-5 xs:p-0 rounded fixed top-10"},Te={class:"p-6 max-w-sm mx-auto bg-gray-950 rounded-xl shadow-lg flex items-center space-x-0"},Ue={class:"p-2"},Se=o("div",{class:"text-2xl font-medium text-white text-center"},"Datos del método:",-1),Ae={class:"text-slate-950 text-2xl text-center text-white"},Ne={class:"text-slate-300 text-center"},je={class:"text-orange-500 text-2xl text-center"},Oe={class:"text-slate-300 text-center"},Fe={class:"text-orange-500 text-2xl text-center"},Re={class:"text-slate-300 text-center"},ze={class:"text-orange-500 text-2xl text-center"},Le={class:"text-slate-300 text-center"},He={class:"text-orange-500 text-2xl text-center"},Ze={class:"text-slate-300 text-center"},qe={class:"text-orange-500 text-2xl text-center"},Ge={class:"text-slate-300 text-center"},Je={class:"text-orange-500 text-2xl text-center"},Ke={class:"text-center text-white"},at={__name:"Pago",setup(c){const n=[{id:1,name:"Pago Movil",phone:"0414-3534569",account:null,account_type:null,bank:"Banco de Venezuela",bank_code:"0102",card_id:"24823972"},{id:2,name:"Transferencia",phone:null,account:"01054578124512456352",account_type:"Corriente",bank:"Banco Mercantil",bank_code:"0105",card_id:"24823972"}],e=V({name:null,card_id:null,phone:null,email:null,raffle_id:1,amount:2,total:0,tasa:0,payment_date:"",payment_method_id:0,file:null,reference_number:null,monitor_tasa:{},rifa:"FERARRI",modalInfoMetodoPago:!1,btnDisabled:!1}),g=async l=>{await se.getMonitor("BCV","lastUpdate").then(a=>{console.log(a),l.monitor_tasa=a.bcv,localStorage.setItem("tasa",a.bcv.price)}).catch(a=>{console.log(a),g(l)}),l.tasa==0?l.tasa=parseFloat(localStorage.getItem("tasa")):l.tasa,l.total=parseFloat(l.tasa)*l.amount};g(e);const b=l=>{if(l.amount<2)return l.amount=2;l.total=parseFloat(l.tasa)*l.amount},w=()=>e.modalInfoMetodoPago=!1,u=l=>{l?e.modalInfoMetodoPago=!0:e.modalInfoMetodoPago=!1},v=l=>{switch(l){case"+":e.amount++;break;case"-":e.amount--;break;default:e.amount=2;break}b(e)};return(l,a)=>(d(),I(P,{title:"Realizar pago"},{header:p(()=>[]),default:p(()=>[o("section",ne,[o("div",re,[le,o("div",de,[o("div",ie,[o("form",{onSubmit:a[17]||(a[17]=B(s=>t(e).post("/compras"),["prevent"]))},[m(y,{class:"text-xl"},{default:p(()=>[x("Premio")]),_:1}),f(o("input",{class:"rounded-2xl my-2 w-full bg-orange-500 text-center text-2xl",readonly:"",type:"text","onUpdate:modelValue":a[0]||(a[0]=s=>t(e).rifa=s)},null,512),[[h,t(e).rifa]]),f(o("input",{class:"",readonly:"",type:"hidden","onUpdate:modelValue":a[1]||(a[1]=s=>t(e).raffle_id=s)},null,512),[[h,t(e).raffle_id]]),t(e).errors.raffle_id?(d(),i("div",ce,r(t(e).errors.raffle_id),1)):_("",!0),m(y,{class:"text-xl"},{default:p(()=>[x("Nombre Completo")]),_:1}),f(o("input",{class:"rounded-2xl my-2 w-full",type:"text","onUpdate:modelValue":a[2]||(a[2]=s=>t(e).name=s),placeholder:"Ingrese nombre completo"},null,512),[[h,t(e).name]]),t(e).errors.name?(d(),i("div",ue,r(t(e).errors.name),1)):_("",!0),m(y,{class:"text-xl"},{default:p(()=>[x("Rif o número de identificación")]),_:1}),f(o("input",{class:"rounded-2xl my-2 w-full",type:"text","onUpdate:modelValue":a[3]||(a[3]=s=>t(e).card_id=s),placeholder:"Ingrese número de identificación"},null,512),[[h,t(e).card_id]]),t(e).errors.card_id?(d(),i("div",pe,r(t(e).errors.card_id),1)):_("",!0),m(y,{class:"text-xl"},{default:p(()=>[x("Teléfono movil")]),_:1}),f(o("input",{class:"rounded-2xl my-2 w-full",type:"text","onUpdate:modelValue":a[4]||(a[4]=s=>t(e).phone=s),placeholder:"Ingrese número contacto"},null,512),[[h,t(e).phone]]),t(e).errors.phone?(d(),i("div",me,r(t(e).errors.phone),1)):_("",!0),m(y,{class:"text-xl"},{default:p(()=>[x("E-mail")]),_:1}),f(o("input",{class:"rounded-2xl my-2 w-full",type:"text","onUpdate:modelValue":a[5]||(a[5]=s=>t(e).email=s),placeholder:"Ingrese correo electrónico"},null,512),[[h,t(e).email]]),t(e).errors.email?(d(),i("div",_e,r(t(e).errors.email),1)):_("",!0),o("div",xe,[o("div",fe,[m(y,{class:"text-xl"},{default:p(()=>[x("Cantidad de voletos")]),_:1}),f(o("input",{class:"w-full rounded-2xl sm:my-2 text-center text-1xl",type:"number",onInput:a[6]||(a[6]=s=>b(t(e))),"onUpdate:modelValue":a[7]||(a[7]=s=>t(e).amount=s)},null,544),[[h,t(e).amount]]),t(e).errors.amount?(d(),i("div",ye,r(t(e).errors.amount),1)):_("",!0)]),o("div",he,[m(k,{type:"button",class:"mx-10 sm:h-5",onClick:a[8]||(a[8]=s=>v("+"))},{default:p(()=>[m(t(W),{style:{width:"18px"}})]),_:1}),m(k,{type:"button",class:"mx-10 sm:h-5",onClick:a[9]||(a[9]=s=>v("-"))},{default:p(()=>[m(t(Q),{style:{width:"18px"}})]),_:1})]),o("div",ge,[m(y,{class:"text-xl"},{default:p(()=>[x("Monto a cancelar en BS")]),_:1}),f(o("input",{class:"w-full rounded-2xl my-2 text-center",readonly:"",type:"number","onUpdate:modelValue":a[10]||(a[10]=s=>t(e).total=s)},null,512),[[h,t(e).total]]),t(e).errors.total?(d(),i("div",ve,r(t(e).errors.total),1)):_("",!0)])]),o("div",be,[o("div",we,"Tasa "+r(t(e).monitor_tasa.title)+": "+r(t(e).tasa)+" Bs",1),ke]),m(y,{class:"text-xl"},{default:p(()=>[x("Fecha de pago")]),_:1}),f(o("input",{class:"rounded-2xl my-2 w-full",type:"date","onUpdate:modelValue":a[11]||(a[11]=s=>t(e).payment_date=s)},null,512),[[h,t(e).payment_date]]),t(e).errors.payment_date?(d(),i("div",Ce,r(t(e).errors.payment_date),1)):_("",!0),m(y,{class:"text-xl"},{default:p(()=>[x("Método de pago")]),_:1}),f(o("select",{class:"rounded-2xl my-2 w-full",id:"select_metodo_pago","onUpdate:modelValue":a[12]||(a[12]=s=>t(e).payment_method_id=s),onChange:a[13]||(a[13]=s=>u(t(e).payment_method_id))},[Me,(d(),i(D,null,$(n,s=>o("option",{key:s.id,value:s.id},r(s.name),9,Ve)),64))],544),[[E,t(e).payment_method_id]]),t(e).errors.payment_method_id?(d(),i("div",Ie,r(t(e).errors.payment_method_id),1)):_("",!0),t(e).modalInfoMetodoPago?_("",!0):(d(),i("button",{key:7,type:"button",onClick:a[14]||(a[14]=s=>u(t(e).payment_method_id)),class:"w-full text-center ease-in duration-300 bg-gray-950 hover:bg-orange-700 shadow-lg shadow-green-500/50 rounded-lg p-2 my-2 text-white text-sm text-center"}," Ver datos de pago ")),m(y,{class:"text-xl"},{default:p(()=>[x("Agrega capture o vauche de pago")]),_:1}),o("input",{class:"rounded-2xl my-2 p-4 w-full block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-green-50 file:text-black-700 hover:file:bg-orange-100",accept:"image/*",type:"file",onInput:a[15]||(a[15]=s=>t(e).file=s.target.files[0])},null,32),t(e).errors.file?(d(),i("div",Be,r(t(e).errors.file),1)):_("",!0),m(y,{class:"text-xl"},{default:p(()=>[x("Número de referencia del pago")]),_:1}),f(o("input",{class:"rounded-2xl my-2 w-full",type:"number","onUpdate:modelValue":a[16]||(a[16]=s=>t(e).reference_number=s),placeholder:"Ingrese número de referencia"},null,512),[[h,t(e).reference_number]]),t(e).errors.reference_number?(d(),i("div",Ee,r(t(e).errors.reference_number),1)):_("",!0),t(e).progress?(d(),i("progress",{key:10,value:t(e).progress.percentage,max:"100"},r(t(e).progress.percentage)+"% ",9,$e)):_("",!0),De],32)]),t(e).modalInfoMetodoPago?(d(),i("div",Pe,[o("div",Te,[o("div",Ue,[Se,o("p",Ae,r(n[t(e).payment_method_id-1].name),1),o("p",Ne,r(n[t(e).payment_method_id-1].phone?"Teléfono":""),1),o("p",je,r(n[t(e).payment_method_id-1].phone?n[t(e).payment_method_id-1].phone:""),1),o("p",Oe,r(n[t(e).payment_method_id-1].account?"Cuenta Bancaria":""),1),o("p",Fe,r(n[t(e).payment_method_id-1].account?n[t(e).payment_method_id-1].account:""),1),o("p",Re,r(n[t(e).payment_method_id-1].account_type?"Tipo de cuenta":""),1),o("p",ze,r(n[t(e).payment_method_id-1].account_type?n[t(e).payment_method_id-1].account_type:""),1),o("p",Le,r(n[t(e).payment_method_id-1].bank?"Banco":""),1),o("p",He,r(n[t(e).payment_method_id-1].bank?n[t(e).payment_method_id-1].bank:""),1),o("p",Ze,r(n[t(e).payment_method_id-1].bank_code?"Código":""),1),o("p",qe,r(n[t(e).payment_method_id-1].bank_code?n[t(e).payment_method_id-1].bank_code:""),1),o("p",Ge,r(n[t(e).payment_method_id-1].card_id?"Documento de identidad":""),1),o("p",Je,r(n[t(e).payment_method_id-1].card_id?n[t(e).payment_method_id-1].card_id:""),1),o("p",Ke,[o("button",{class:"bg-red-600 p-2 m-2 rounded-xl",onClick:a[18]||(a[18]=s=>w())},"Cerrar")])])])])):_("",!0)])])])]),_:1}))}};export{at as default};
