import{B as w,A as k,T as C,o as d,c as M,w as m,a as o,f as V,j as t,b as _,i as x,m as f,v as g,e as c,t as n,g as u,C as B,k as D,F as $}from"./app-I8GZrc-a.js";import{_ as I}from"./ClientLayout-tlVd7Xuz.js";import{_ as y}from"./InputLabel-qkNP1bOy.js";import"./NavLink-giwlmuyC.js";import"./_plugin-vue_export-helper-x3n3nnut.js";import"./Banner-rvhSdJ8J.js";const{Axios:T,AxiosError:U,CanceledError:E,isCancel:P,CancelToken:S,VERSION:A,all:j,Cancel:N,isAxiosError:R,spread:F,toFormData:z,AxiosHeaders:O,HttpStatusCode:L,formToJSON:H,getAdapter:q,mergeConfig:J}=w,K=Object.freeze(Object.defineProperty({__proto__:null,Axios:T,AxiosError:U,AxiosHeaders:O,Cancel:N,CancelToken:S,CanceledError:E,HttpStatusCode:L,VERSION:A,all:j,default:w,formToJSON:H,getAdapter:q,isAxiosError:R,isCancel:P,mergeConfig:J,spread:F,toFormData:z},Symbol.toStringTag,{value:"Module"})),G=k(K),{default:Q}=G,W="https://exchange.vcoud.com/";function X(p,r="-"){const e={á:"a",é:"e",í:"i",ó:"o",ú:"u"};for(const[h,b]of Object.entries(e))p=p.toLowerCase().replace(h,b).replace(" ",r);return p}function Y(p){return p.split(" ")[0]==="Dólar"&&p!=="Dólar Today"?p==="Dólar Monitor"?"EnParaleloVzla":p.split(" ")[1]:p}async function Z(p,r,e){let h={};const b=await Q.get(W+"coins/latest");try{if(b.status!==200)throw new Error(`Error de comunicación CriptoDolar. Codigo: ${b.status}`);const v=b.data;for(const i of v)if(i.type.includes("bolivar")||i.type.includes("bancove")){const l={title:Y(i.name),price:i.price,price_old:i.priceOld,type:i.type==="bancove"?"bank":"monitor",lastUpdate:i.updatedAt};h[X(l.title)]=l}if(!(p in h))return h;try{const i=h[p.toLowerCase()];if(r){const l=i[r];if(l===void 0)throw new Error("Consulte la documentación de la biblioteca: https://github.com/fcoagz/consulta-dolar-venezuela");return r==="price"&&e?`Bs. ${l}`:l}else return i}catch(i){console.error(`KeyError: ${i.message}`)}}catch(v){console.error(v)}}var ee={getMonitor:Z};const te={class:""},oe={class:"h-full"},ae=o("div",{class:"flex justify-center my-2"},[o("span",{class:"p-2 box-decoration-slice bg-gradient-to-r from-orange-600 to-pink-500 text-white px-2 text-6xl"}," Realizar pago ")],-1),se={class:"flex justify-center flex-wrap"},ne={class:"bg-white rounded-2xl p-4 mx-10 my-5"},re={key:0},le={key:1,class:"p-0 m-0 text-red-500"},de={key:2,class:"p-0 m-0 text-red-500"},ie={key:3,class:"p-0 m-0 text-red-500"},ce={key:4,class:"p-0 m-0 text-red-500"},ue={class:"sm:flex sm:justify-between"},pe={class:"py-2 pr-2"},me={key:0,class:"p-0 m-0 text-red-500"},_e={class:"py-2"},xe={key:0,class:"p-0 m-0 text-red-500"},fe={class:"flex justify-between"},ye={class:"border p-2 mx-2"},ge=o("div",{class:"border p-2 mx-2"},"Costo por voleto: 2$",-1),he={key:5,class:"p-0 m-0 text-red-500"},be=["value"],ve={key:6,class:"p-0 m-0 text-red-500"},we={key:8,class:"p-0 m-0 text-red-500"},ke={key:9,class:"p-0 m-0 text-red-500"},Ce=["value"],Me=o("button",{class:"w-full text-center ease-in duration-300 bg-green-500 hover:bg-orange-700 shadow-lg shadow-green-500/50 rounded-lg p-2 my-2 text-white text-2xl text-center"}," Registrar pago ",-1),Ve={key:0,class:"p-4 m-5 xs:p-0 rounded fixed top-10"},Be={class:"p-6 max-w-sm mx-auto bg-gray-950 rounded-xl shadow-lg flex items-center space-x-0"},De={class:"p-2"},$e=o("div",{class:"text-2xl font-medium text-white text-center"},"Datos del método:",-1),Ie={class:"text-slate-950 text-2xl text-center text-white"},Te={class:"text-slate-300 text-center"},Ue={class:"text-orange-500 text-2xl text-center"},Ee={class:"text-slate-300 text-center"},Pe={class:"text-orange-500 text-2xl text-center"},Se={class:"text-slate-300 text-center"},Ae={class:"text-orange-500 text-2xl text-center"},je={class:"text-slate-300 text-center"},Ne={class:"text-orange-500 text-2xl text-center"},Re={class:"text-slate-300 text-center"},Fe={class:"text-orange-500 text-2xl text-center"},ze={class:"text-slate-300 text-center"},Oe={class:"text-orange-500 text-2xl text-center"},Le={class:"text-center text-white"},We={__name:"Pago",setup(p){const r=[{id:1,name:"Pago Movil",phone:"0414-3534569",account:null,account_type:null,bank:"Banco de Venezuela",bank_code:"0102",card_id:"24823972"},{id:2,name:"Transferencia",phone:null,account:"01054578124512456352",account_type:"Corriente",bank:"Banco Mercantil",bank_code:"0105",card_id:"24823972"}],e=C({name:null,card_id:null,phone:null,email:null,raffle_id:1,amount:2,total:0,tasa:0,payment_date:"",payment_method_id:null,file:null,reference_number:null,monitor_tasa:{},rifa:"FERARRI",modalInfoMetodoPago:!1,btnDisabled:!1}),h=async l=>{await ee.getMonitor("BCV","lastUpdate").then(a=>{console.log(a),l.monitor_tasa=a.bcv,localStorage.setItem("tasa",a.bcv.price)}).catch(a=>{console.log(a),h(l)}),l.tasa==0?l.tasa=parseFloat(localStorage.getItem("tasa")):l.tasa,l.total=parseFloat(l.tasa)*l.amount};h(e);const b=l=>{if(l.amount<2)return l.amount=2;l.total=parseFloat(l.tasa)*l.amount},v=()=>e.modalInfoMetodoPago=!1,i=l=>{l?e.modalInfoMetodoPago=!0:e.modalInfoMetodoPago=!1};return(l,a)=>(d(),M(I,{title:"Realizar pago"},{header:m(()=>[]),default:m(()=>[o("section",te,[o("div",oe,[ae,o("div",se,[o("div",ne,[o("form",{onSubmit:a[15]||(a[15]=V(s=>t(e).post("/compras"),["prevent"]))},[_(y,{class:"text-xl"},{default:m(()=>[x("Premio")]),_:1}),f(o("input",{class:"rounded-2xl my-2 w-full bg-orange-500 text-center text-2xl",readonly:"",type:"text","onUpdate:modelValue":a[0]||(a[0]=s=>t(e).rifa=s)},null,512),[[g,t(e).rifa]]),f(o("input",{class:"",readonly:"",type:"hidden","onUpdate:modelValue":a[1]||(a[1]=s=>t(e).raffle_id=s)},null,512),[[g,t(e).raffle_id]]),t(e).errors.raffle_id?(d(),c("div",re,n(t(e).errors.raffle_id),1)):u("",!0),_(y,{class:"text-xl"},{default:m(()=>[x("Nombre Completo")]),_:1}),f(o("input",{class:"rounded-2xl my-2 w-full",type:"text","onUpdate:modelValue":a[2]||(a[2]=s=>t(e).name=s)},null,512),[[g,t(e).name]]),t(e).errors.name?(d(),c("div",le,n(t(e).errors.name),1)):u("",!0),_(y,{class:"text-xl"},{default:m(()=>[x("Rif o número de identificación")]),_:1}),f(o("input",{class:"rounded-2xl my-2 w-full",type:"text","onUpdate:modelValue":a[3]||(a[3]=s=>t(e).card_id=s)},null,512),[[g,t(e).card_id]]),t(e).errors.card_id?(d(),c("div",de,n(t(e).errors.card_id),1)):u("",!0),_(y,{class:"text-xl"},{default:m(()=>[x("Teléfono movil")]),_:1}),f(o("input",{class:"rounded-2xl my-2 w-full",type:"text","onUpdate:modelValue":a[4]||(a[4]=s=>t(e).phone=s)},null,512),[[g,t(e).phone]]),t(e).errors.phone?(d(),c("div",ie,n(t(e).errors.phone),1)):u("",!0),_(y,{class:"text-xl"},{default:m(()=>[x("E-mail")]),_:1}),f(o("input",{class:"rounded-2xl my-2 w-full",type:"text","onUpdate:modelValue":a[5]||(a[5]=s=>t(e).email=s)},null,512),[[g,t(e).email]]),t(e).errors.email?(d(),c("div",ce,n(t(e).errors.email),1)):u("",!0),o("div",ue,[o("div",pe,[_(y,{class:"text-xl"},{default:m(()=>[x("Cantidad de voletos")]),_:1}),f(o("input",{class:"w-full rounded-2xl my-2 text-center text-1xl",type:"number",onInput:a[6]||(a[6]=s=>b(t(e))),"onUpdate:modelValue":a[7]||(a[7]=s=>t(e).amount=s)},null,544),[[g,t(e).amount]]),t(e).errors.amount?(d(),c("div",me,n(t(e).errors.amount),1)):u("",!0)]),o("div",_e,[_(y,{class:"text-xl"},{default:m(()=>[x("Monto a cancelar en BS")]),_:1}),f(o("input",{class:"w-full rounded-2xl my-2 text-center",readonly:"",type:"number","onUpdate:modelValue":a[8]||(a[8]=s=>t(e).total=s)},null,512),[[g,t(e).total]]),t(e).errors.total?(d(),c("div",xe,n(t(e).errors.total),1)):u("",!0)])]),o("div",fe,[o("div",ye,"Tasa "+n(t(e).monitor_tasa.title)+": "+n(t(e).tasa)+" Bs",1),ge]),_(y,{class:"text-xl"},{default:m(()=>[x("Fecha de pago")]),_:1}),f(o("input",{class:"rounded-2xl my-2 w-full",type:"date","onUpdate:modelValue":a[9]||(a[9]=s=>t(e).payment_date=s)},null,512),[[g,t(e).payment_date]]),t(e).errors.payment_date?(d(),c("div",he,n(t(e).errors.payment_date),1)):u("",!0),_(y,{class:"text-xl"},{default:m(()=>[x("Método de pago")]),_:1}),f(o("select",{class:"rounded-2xl my-2 w-full",id:"select_metodo_pago","onUpdate:modelValue":a[10]||(a[10]=s=>t(e).payment_method_id=s),onChange:a[11]||(a[11]=s=>i(t(e).payment_method_id))},[(d(),c($,null,D(r,s=>o("option",{key:s.id,value:s.id,selected:""},n(s.name),9,be)),64))],544),[[B,t(e).payment_method_id]]),t(e).errors.payment_method_id?(d(),c("div",ve,n(t(e).errors.payment_method_id),1)):u("",!0),t(e).modalInfoMetodoPago?u("",!0):(d(),c("button",{key:7,type:"button",onClick:a[12]||(a[12]=s=>i(t(e).payment_method_id)),class:"w-full text-center ease-in duration-300 bg-gray-950 hover:bg-orange-700 shadow-lg shadow-green-500/50 rounded-lg p-2 my-2 text-white text-sm text-center"}," Ver datos de pago ")),_(y,{class:"text-xl"},{default:m(()=>[x("Agrega capture o vauche de pago")]),_:1}),o("input",{class:"rounded-2xl my-2 p-4 w-full block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-green-50 file:text-black-700 hover:file:bg-orange-100",accept:"image/*",type:"file",onInput:a[13]||(a[13]=s=>t(e).file=s.target.files[0])},null,32),t(e).errors.file?(d(),c("div",we,n(t(e).errors.file),1)):u("",!0),_(y,{class:"text-xl"},{default:m(()=>[x("Número de referencia del pago")]),_:1}),f(o("input",{class:"rounded-2xl my-2 w-full",type:"number","onUpdate:modelValue":a[14]||(a[14]=s=>t(e).reference_number=s)},null,512),[[g,t(e).reference_number]]),t(e).errors.reference_number?(d(),c("div",ke,n(t(e).errors.reference_number),1)):u("",!0),t(e).progress?(d(),c("progress",{key:10,value:t(e).progress.percentage,max:"100"},n(t(e).progress.percentage)+"% ",9,Ce)):u("",!0),Me],32)]),t(e).modalInfoMetodoPago?(d(),c("div",Ve,[o("div",Be,[o("div",De,[$e,o("p",Ie,n(r[t(e).payment_method_id-1].name),1),o("p",Te,n(r[t(e).payment_method_id-1].phone?"Teléfono":""),1),o("p",Ue,n(r[t(e).payment_method_id-1].phone?r[t(e).payment_method_id-1].phone:""),1),o("p",Ee,n(r[t(e).payment_method_id-1].account?"Cuenta Bancaria":""),1),o("p",Pe,n(r[t(e).payment_method_id-1].account?r[t(e).payment_method_id-1].account:""),1),o("p",Se,n(r[t(e).payment_method_id-1].account_type?"Tipo de cuenta":""),1),o("p",Ae,n(r[t(e).payment_method_id-1].account_type?r[t(e).payment_method_id-1].account_type:""),1),o("p",je,n(r[t(e).payment_method_id-1].bank?"Banco":""),1),o("p",Ne,n(r[t(e).payment_method_id-1].bank?r[t(e).payment_method_id-1].bank:""),1),o("p",Re,n(r[t(e).payment_method_id-1].bank_code?"Código":""),1),o("p",Fe,n(r[t(e).payment_method_id-1].bank_code?r[t(e).payment_method_id-1].bank_code:""),1),o("p",ze,n(r[t(e).payment_method_id-1].card_id?"Documento de identidad":""),1),o("p",Oe,n(r[t(e).payment_method_id-1].card_id?r[t(e).payment_method_id-1].card_id:""),1),o("p",Le,[o("button",{class:"bg-red-600 p-2 m-2 rounded-xl",onClick:a[16]||(a[16]=s=>v())},"Cerrar")])])])])):u("",!0)])])])]),_:1}))}};export{We as default};
